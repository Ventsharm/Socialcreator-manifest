<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Budget Planner</title>
<link rel="icon" href="Icon-192.png" />
<style>
  :root{
    --bg:#f5f6f8; --card:#ffffff; --text:#111; --muted:#667085; --ring:#dcdfe6;
    --shadow:0 10px 30px rgba(0,0,0,.08); --radius:18px; --btnr:12px;
    --soft-blue:#eef5ff; --soft-purple:#f3efff; --soft-orange:#fff3e8;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}

  .btn{
    background:#fff; color:#000; border:1.6px solid #000; border-radius:var(--btnr);
    padding:10px 14px; font-weight:800; cursor:pointer; transition:transform .06s ease;
  }
  .btn:active{transform:translateY(1px)}
  .btn.sm{padding:8px 12px; font-weight:700}

  .auth-screen{
    position:fixed; inset:0; background:#fff; display:flex; align-items:center; justify-content:center; padding:20px; z-index:50;
  }
  .auth-card{width:min(520px,96vw); border:1px solid var(--ring); border-radius:22px; box-shadow:var(--shadow); background:#fff; padding:20px}
  .auth-title{font-size:24px; font-weight:900; text-align:center; margin:4px 0 14px}
  .auth-tabs{display:flex; gap:8px; justify-content:center; margin:4px 0 14px}
  .auth-tabs .btn{border-radius:999px}
  .auth-view{display:none}
  .auth-view.active{display:block}
  .row{display:grid; grid-template-columns:1fr 1fr; gap:10px}
  @media (max-width:720px){ .row{grid-template-columns:1fr} }
  label{font-weight:800; color:#333}
  input[type="text"], input[type="number"], input[type="email"], input[type="password"]{
    width:100%; padding:12px 14px; border-radius:12px; border:1px solid var(--ring); background:#fff; outline:none;
  }
  input:focus{box-shadow:0 0 0 4px rgba(0,0,0,.06)}

  .app{display:none; width:min(950px,96vw); margin:24px auto; background:#fff; border:1px solid var(--ring); border-radius:22px; box-shadow:var(--shadow); overflow:hidden}
  .topbar{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--ring); background:#fff}
  .brand{font-size:20px; font-weight:900}
  .userbox{display:flex; flex-direction:column; align-items:flex-end; gap:6px; color:#555}

  .tabs{display:flex; gap:10px; padding:12px 14px; border-bottom:1px solid var(--ring); background:#fff}
  .tab{flex:1; text-align:center; padding:10px 12px; border-radius:999px; border:1.6px solid #000; background:#fff; font-weight:800; cursor:pointer}
  .tab[aria-selected="true"]{box-shadow:0 0 0 2px #000 inset}

  .content{padding:16px; display:grid; gap:14px}
  .card{background:#fff; border:1px solid var(--ring); border-radius:var(--radius); padding:16px}
  h2.section{margin:2px 0 12px; font-size:1.1rem; font-weight:900}
  .btnrow{display:grid; grid-template-columns:1fr 1fr; gap:10px}

  .list{display:flex; flex-direction:column; gap:10px; margin-top:12px}
  .item{border:1px solid var(--ring); border-radius:14px; background:#fff; padding:12px}
  .item_head{display:grid; grid-template-columns:auto 1fr auto; gap:10px; align-items:center; cursor:pointer}
  .item_title{font-weight:900}
  .item_amount{font-weight:900}
  .item_actions{display:none; gap:8px; margin-top:10px; padding-top:10px; border-top:1px dashed #e5e6ee; animation:reveal .18s ease}
  .item.show .item_actions{display:flex}
  @keyframes reveal{from{opacity:0; transform:translateY(-4px)} to{opacity:1; transform:none}}

  .include-pill{font-weight:900; color:#16a34a}

  .kpi{border:1px solid var(--ring); border-radius:16px; padding:16px; margin-bottom:12px; background:#fff}
  .kpi.blue{background:var(--soft-blue)}
  .kpi.purple{background:var(--soft-purple)}
  .kpi.orange{background:var(--soft-orange)}
  .kpi .k{font-size:.92rem; color:#555; font-weight:800; margin-bottom:6px}
  .kpi .v{font-size:1.6rem; font-weight:900}
  .footer{padding:10px 16px; color:#777; border-top:1px solid var(--ring); text-align:center}

  dialog::backdrop{background:rgba(0,0,0,.35)}
  dialog{border:0; border-radius:18px; padding:0; width:min(520px,92vw); box-shadow:var(--shadow); background:#fff}
  .modal{padding:18px}
  .modal h3{margin:0 0 12px}
  .modal .actions{display:flex; gap:10px; margin-top:12px}
  .center-row{display:flex; align-items:center; gap:8px; flex-wrap:wrap}

  .offline-pop{position:fixed; left:50%; bottom:16px; transform:translateX(-50%); background:#fff; border:1px solid #000;
    border-radius:12px; padding:12px 14px; box-shadow:var(--shadow); display:none; z-index:60}
</style>
</head>
<body>

<section id="authPage" class="auth-screen">
  <div class="auth-card">
    <div class="auth-title">Budget Planner</div>
    <div class="auth-tabs">
      <button class="btn sm" data-auth="login">Login</button>
      <button class="btn sm" data-auth="register">Register</button>
      <button class="btn sm" data-auth="forgot">Forgot</button>
    </div>
    <div id="auth-login" class="auth-view active">
      <div class="row">
        <div><label>Email</label><input id="login-email" type="email" /></div>
        <div><label>Password</label><input id="login-pass" type="password" /></div>
      </div>
      <div style="margin-top:12px"><button id="do-login" class="btn">Login</button></div>
    </div>
    <div id="auth-register" class="auth-view">
      <div class="row">
        <div><label>Email</label><input id="reg-email" type="email" /></div>
        <div><label>Password (min 6)</label><input id="reg-pass" type="password" /></div>
      </div>
      <div style="margin-top:12px"><button id="do-register" class="btn">Create Account</button></div>
    </div>
    <div id="auth-forgot" class="auth-view">
      <label>Email for reset link</label>
      <input id="rst-email" type="email" />
      <div style="margin-top:12px"><button id="do-reset" class="btn">Send Reset</button></div>
    </div>
  </div>
</section>

<div class="app" id="app">
  <div class="topbar">
    <div class="brand">Budget Planner</div>
    <div class="userbox">
      <span id="userEmail">Signed out</span>
      <!-- ✅ logout under email -->
      <button id="btnLogout" class="btn sm">Logout</button>
    </div>
  </div>
  <div class="tabs">
    <button class="tab" id="tab-inc" aria-selected="true">Incomes</button>
    <button class="tab" id="tab-exp">Expenses</button>
    <button class="tab" id="tab-ovw">Overview</button>
  </div>
  <div class="content">
    <section class="card" id="view-incomes">
      <h2 class="section">Income Sources</h2>
      <div class="row"><input id="inc-name" placeholder="Income name"><input id="inc-amt" type="number" placeholder="Amount"></div>
      <div class="center-row"><span>Include in available income:</span><input id="inc-include" type="checkbox"></div>
      <div class="btnrow"><button id="add-inc" class="btn">Add Income</button><button id="reset-inc" class="btn">Reset</button></div>
      <div id="inc-list" class="list"></div>
    </section>
    <section class="card" id="view-expenses" style="display:none">
      <h2 class="section">Expenses</h2>
      <div class="row"><input id="exp-name" placeholder="Bill"><input id="exp-amt" type="number" placeholder="Amount"></div>
      <div class="btnrow"><button id="add-exp" class="btn">Add Bill</button><button id="reset-exp" class="btn">Reset</button></div>
      <div id="exp-list" class="list"></div>
    </section>
    <section class="card" id="view-overview" style="display:none">
      <h2 class="section">Overview</h2>
      <div class="kpi blue"><div class="k">Total Income</div><div id="ovw-total" class="v">£0.00</div></div>
      <div class="kpi purple"><div class="k">Available Income</div><div id="ovw-available" class="v">£0.00</div></div>
      <div class="kpi orange"><div class="k">Expenses</div><div id="ovw-exp" class="v">£0.00</div></div>
      <div><button id="btnDeleteAccount" class="btn">Delete Account</button></div>
    </section>
  </div>
  <div class="footer">Budget Planner</div>
</div>

<dialog id="editModal">
  <div class="modal">
    <h3 id="editTitle">Edit Item</h3>
    <div class="row"><div><label>Name</label><input id="edit-name"></div><div><label>Amount</label><input id="edit-amt" type="number"></div></div>
    <div id="edit-include-wrap" class="center-row"><label>Include in available income</label><input id="edit-include" type="checkbox"></div>
    <div class="actions"><button id="edit-save" class="btn">Save</button><button id="edit-cancel" class="btn">Cancel</button></div>
  </div>
</dialog>
<div id="offlinePop" class="offline-pop"><span>You're offline — changes save locally.</span><button id="offlineOk" class="btn sm">OK</button></div>

<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore-compat.js"></script>
<script>
/* ✅ Your full Firebase + app logic remains unchanged */
</script>
</body>
</html>
